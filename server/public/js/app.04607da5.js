(function(e){function t(t){for(var s,a,o=t[0],c=t[1],d=t[2],h=0,m=[];h<o.length;h++)a=o[h],Object.prototype.hasOwnProperty.call(r,a)&&r[a]&&m.push(r[a][0]),r[a]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(e[s]=c[s]);l&&l(t);while(m.length)m.shift()();return i.push.apply(i,d||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],s=!0,o=1;o<n.length;o++){var c=n[o];0!==r[c]&&(s=!1)}s&&(i.splice(t--,1),e=a(a.s=n[0]))}return e}var s={},r={app:0},i=[];function a(t){if(s[t])return s[t].exports;var n=s[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=s,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)a.d(n,s,function(t){return e[t]}.bind(null,s));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var d=0;d<o.length;d++)t(o[d]);var l=c;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"015f":function(e,t,n){},"17c0":function(e,t,n){},"1c66":function(e,t,n){"use strict";n("3f69")},2089:function(e,t,n){"use strict";n("70f3")},"253b":function(e,t,n){},"2d31":function(e,t,n){"use strict";n("a273")},3886:function(e,t,n){"use strict";n("253b")},"3f69":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("a79d");var s=n("7a23");function r(e,t,n,r,i,a){const o=Object(s["A"])("router-view");return Object(s["s"])(),Object(s["f"])(o)}var i={name:"App"};n("9cdc");i.render=r;var a=i,o=n("6c02");const c=Object(s["K"])("data-v-70436143");Object(s["v"])("data-v-70436143");const d={class:"match-game"};Object(s["t"])();const l=c((function(e,t,n,r,i,a){const o=Object(s["A"])("Timer");return Object(s["s"])(),Object(s["f"])("div",d,[Object(s["i"])("button",{onClick:t[1]||(t[1]=t=>e.setDuration(5))},"Set Duration"),Object(s["i"])("button",{onClick:t[2]||(t[2]=t=>e.setScore(1))},"1"),Object(s["i"])("button",{onClick:t[3]||(t[3]=t=>e.setScore(0))},"0"),Object(s["i"])("button",{onClick:t[4]||(t[4]=t=>e.setPlaying(!0))},"Set to Play"),Object(s["i"])(o,{config:i.config.timer,duration:e.duration,playing:e.playing,score:e.score},null,8,["config","duration","playing","score"])])}));var h=n("bc3a"),m=n.n(h);m.a.defaults.headers.common["quizdini-timezone"]=Intl.DateTimeFormat().resolvedOptions().timeZone;const u={timeout:3e4},g=async({url:e,config:t=u})=>{console.log("url",e),console.log("config",t);try{const n=await m.a.get(e,t);return{data:n.data}}catch(n){return{error:n.response.data}}},f="/api/match",p=e=>g({url:`${f}/${e}`});var v={dnd:{timeouts:{throttle:33}},game:{timeouts:{enter:1e3,leave:1e3}},tile:{timeouts:{enter:800,hit:800,leave:0,miss:800,shuffle:500}},timer:{debug:!0,thresholds:{warn:40,alert:20},timeouts:{interval:100,change:250,enter:1e3,leave:1e3}}};const b=Object(s["w"])({canDnD:!1,colorScheme:null,correct:0,definitions:[],duration:60,gameId:null,incorrect:0,itemsPerBoard:9,matches:[],playing:!1,score:0,showBoard:!1,stats:[],terms:[],title:null}),O=v,y={canDnD:()=>b.canDnD,colorScheme:()=>b.colorScheme,correct:()=>b.correct,definitions:()=>b.definitions,duration:()=>b.duration,gameId:()=>b.gameId,incorrect:()=>b.incorrect,itemsPerBoard:()=>b.itemsPerBoard,matches:()=>b.matches,playing:()=>b.playing,score:()=>b.score,showBoard:()=>b.showBoard,stats:()=>b.stats,terms:()=>b.terms,title:()=>b.title},j={setCanDnD:e=>b.canDnD=e,setColorScheme:e=>b.colorScheme=e,setCorrect:e=>b.correct=e,setDefinitions:e=>b.definitions=e,setDuration:e=>b.duration=e,setGameId:e=>b.gameId=e,setIncorrect:e=>b.incorrect=e,setItemsPerBoard:e=>b.itemsPerBoard=e,setMatches:e=>b.matches=e,setPlaying:e=>b.playing=e,setScore:e=>b.score=e,setShowBoard:e=>b.showBoard=e,setStats:e=>b.stats=e,setTerms:e=>b.terms=e,setTitle:e=>b.title=e};n("ddb0");var M=n("8dee"),w=n.n(M);function I(e){for(let t=e.length-1;t>0;t--){const n=Math.floor(Math.random()*(t+1));[e[t],e[n]]=[e[n],e[t]]}return e}function D(e,t,n="id"){return Object.prototype.hasOwnProperty.call(t,n)?e.map(e=>e[n]!==t[n]?e:{...e,...t}):e}function T(e,t,n="id",s){if(!Object.prototype.hasOwnProperty.call(t,n))return e;const r=e.find(e=>e[n]===t[n]),i=s?s(r):t;return r?e.map(e=>e[n]!==i[n]?e:{...e,...i}):e.concat(i)}const _=(e,t,n)=>({transform:"translate3d("+e+"px, "+t+"px, "+n+"px)"}),S=(e,t,n,s,r,i,a)=>({"--hit-start-tx":e+"px","--hit-start-ty":t+"px","--hit-start-tz":n+"px","--hit-end-tx":s+"px","--hit-end-ty":r+"px","--hit-end-tz":i+"px","--hit-duration":a+"ms"}),x=(e,t,n)=>({..._(e,t,n)}),P=e=>{console.log("loading data...");const{matchId:t,matches:n=[],options:{duration:s=60,colorScheme:r="",itemsPerBoard:i=9}={},title:a=""}=e;b.colorScheme=r,b.duration=s,b.gameId=t,b.itemsPerBoard=i,b.matches=n,b.title=a},B=()=>{console.log("dealing...");const e=I(b.matches),t=e.slice(0,Math.min(b.itemsPerBoard,e.length));let n=t.map(e=>({...e,matched:!1,show:!0})),s=I(n.map(e=>{const{term:t,definition:n,...s}=e;return{...s,content:t,answer:n,id:w.a.generate()}})),r=[...n];r=r.map(e=>{const{term:t,definition:n,...s}=e;return{...s,content:n,id:w.a.generate()}}),b.terms=s,b.definitions=r},C=()=>{console.log("shuffling..."),b.terms=I(b.terms),b.definitions=I(b.definitions)},E=(e,t)=>{const{answer:n}=b.terms.find(t=>t.id===e)||{},{content:s}=b.definitions.find(e=>e.id===t)||{};return!!n&&!!s&&n===s},L=e=>{const{dragId:t,dragX:n,dragY:s}=e||{};b.terms=D(b.terms,{id:t,style:b.moveStyle(n,s,1),className:"drag"})},A=e=>{const{dropId:t}=e||{};b.definitions=b.definitions.map(e=>({...e,className:e.id!==t||e.matched?"":"over"}))},X=e=>{const{dragId:t,dragX:n,dragY:s,dropId:r,dropX:i,dropY:a}=e||{},o=!!r&&E(t,r);if(b.terms=D(b.terms,{id:t,matched:o,className:o?"hit":"miss",style:o?S(n,s,1,i,a,1,O.tile.hitMs):x(0,0,0)}),!r)return;b.definitions=D(b.definitions,{id:r,className:o?"hit":"",...o&&{matched:!0}});const{content:c}=b.terms.find(e=>e.id===t)||{};b.score=Math.max(o?b.score+1:b.score-1,0),b.stats=T(b.stats,{term:c},"term",e=>e?{term:c,hit:o?e.hit+1:e.hit,miss:o?e.miss:e.miss+1}:{term:c,hit:o?1:0,miss:o?0:1})},Y=()=>{console.log("game over..."),b.playing=!1,b.showBoard=!1},$={deal:B,drag:L,drop:X,gameOver:Y,isMatch:E,load:P,over:A,shuffle:C},N=Object(s["K"])("data-v-3d2b0b35");Object(s["v"])("data-v-3d2b0b35");const k={class:"match-timer"},q={class:"timer"},z={class:"timer__wrapper"},G={class:"timer__svg",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg","xmlns:svg":"http://www.w3.org/2000/svg"},K={class:"timer__circle"};Object(s["t"])();const F=N((function(e,t,n,r,i,a){return Object(s["s"])(),Object(s["f"])(s["b"],{duration:{enter:""+e.timeouts.enter,leave:""+e.timeouts.leave},"enter-active-class":"fade-in-active","enter-class":"fade-in-start","enter-to-class":"fade-in-end","leave-active-class":"fade-out-active","leave-class":"fade-out-start","leave-to-class":"fade-out-end",onBeforeEnter:a.beforeEnter,onAfterEnter:a.afterEnter,onAfterLeave:a.afterLeave},{default:N(()=>[Object(s["J"])(Object(s["i"])("div",k,[Object(s["i"])("div",q,[Object(s["i"])(s["b"],{appear:"",duration:{enter:""+e.timeouts.change,leave:""+e.timeouts.change},"leave-active-class":"scoring-active","leave-to-class":"scoring-end",onAfterLeave:e.endScoreChange},{default:N(()=>[Object(s["J"])(Object(s["i"])("div",z,[(Object(s["s"])(),Object(s["f"])("svg",G,[Object(s["i"])("g",K,[Object(s["i"])("circle",{class:["timer__path-elapsed",e.scoreClass],cx:"50",cy:"50",r:"45"},null,2),Object(s["i"])("path",{"stroke-dasharray":a.strokeDasharray,class:["timer__path-remaining",[e.severity,e.scoreClass]],d:"M 50, 50\n            m -45, 0\n            a 45,45 0 1,0 90,0\n            a 45,45 0 1,0 -90,0\n          "},null,10,["stroke-dasharray"])])])),Object(s["i"])("span",{class:["timer__label",e.scoreClass]},Object(s["D"])(n.score||e.formatted),3)],512),[[s["H"],!e.scoring]])]),_:1},8,["duration","onAfterLeave"])])],512),[[s["H"],n.playing]])]),_:1},8,["duration","onBeforeEnter","onAfterEnter","onAfterLeave"])})),H={ALERT:"alert",WARN:"warn",SUCCESS:"success"};function J({duration:e,score:t,interval:n,warn:r,alert:i,debug:a=!1}){const o=Object(s["w"])({score:t,duration:e,scoring:!1,elapsed:0,scoreClass:"",intervalId:null,setElapsed:e=>o.elapsed=e,severity:Object(s["d"])(()=>o.progress<=r?o.progress<=i?H.ALERT:H.WARN:H.SUCCESS),expired:Object(s["d"])(()=>o.remaining<=0),formatted:Object(s["d"])(()=>{const e=Math.floor(o.remaining/6e4),t=Math.floor(o.remaining%6e4/1e3);return t<10?`${e}:0${t}`:`${e}:${t}`}),progress:Object(s["d"])(()=>Math.round(o.remaining/(1e3*e.value)*1e4)/100),remaining:Object(s["d"])(()=>1e3*e.value-o.elapsed),startTimer:()=>{a&&console.log("timer start..."),o.elapsed=0,o.intervalId=setInterval(()=>{o.elapsed+=n},n)},endTimer:()=>{a&&console.log("timer end..."),o.intervalId&&(clearInterval(o.intervalId),o.intervalId=null)},endScoreChange:()=>{a&&console.log("timer scoring end..."),o.scoring=!1,o.scoreClass=""}});return Object(s["I"])(t,(e,t)=>{a&&console.log("Score changed: ",e,t),o.scoring=!0,o.scoreClass=e>t?"gain":"loss"}),{...Object(s["F"])(o)}}const R=283;var U={name:"Timer",props:["config","duration","playing","score"],setup(e){const{duration:t,score:n}=Object(s["F"])(e);return{...J({duration:t,score:n,interval:e.config.timeouts.interval,warn:e.config.thresholds.warn,alert:e.config.thresholds.alert,debug:e.config.debug}),...e.config}},computed:{strokeDasharray(){const e=this.progress/100-1/this.duration*(1-this.progress/100);return`${(e*R).toFixed(0)} ${R}`}},methods:{gameOver:$.gameOver,beforeEnter(){this.debug&&console.log("before entered..."),this.setElapsed(0)},afterEnter(){this.debug&&console.log("timer entered..."),this.startTimer()},afterLeave(){this.debug&&console.log("timer left...")}},watch:{expired(e,t){!t&&e&&(this.endTimer(),this.gameOver())}},beforeUnmount(){this.debug&&console.log(this.$options.name,"before destroy..."),this.endTimer()}};n("2d31");U.render=F,U.__scopeId="data-v-3d2b0b35";var Z=U,W={name:"Match",components:{Timer:Z},data(){return{state:b,config:O}},computed:{...y,matchId(){return this.$route.params.id}},methods:{...j,...$},async created(){const e=await p(this.matchId);this.load(e.data),this.deal(),setTimeout(()=>{this.shuffle(),this.setCanDnD(!0),this.setPlaying(!0)},1e3)}};n("a2d5");W.render=l,W.__scopeId="data-v-70436143";var Q=W;const V=Object(s["K"])("data-v-55a1f694");Object(s["v"])("data-v-55a1f694");const ee={class:"full-page full-page--match"};Object(s["t"])();const te=V((function(e,t,n,r,i,a){const o=Object(s["A"])("MatchGame");return Object(s["s"])(),Object(s["f"])("div",ee,[i.showBoard?(Object(s["s"])(),Object(s["f"])(o,{key:0,"color-scheme":i.colorScheme,duration:i.duration,"items-per-board":i.itemsPerBoard,matches:i.matches,config:a.config,onGameOver:a.onGameOver},null,8,["color-scheme","duration","items-per-board","matches","config","onGameOver"])):Object(s["g"])("",!0)])})),ne=Object(s["K"])("data-v-9f56f7fa");Object(s["v"])("data-v-9f56f7fa");const se={id:"match-game"},re={id:"match-timer"};Object(s["t"])();const ie=ne((function(e,t,n,r,i,a){const o=Object(s["A"])("MatchTimer"),c=Object(s["A"])("MatchTileBoard"),d=Object(s["A"])("DnD");return Object(s["s"])(),Object(s["f"])(s["b"],{appear:"",css:!0,duration:{enter:""+n.config.game.enterMs,leave:""+n.config.game.leaveMs},"enter-active-class":"fade-in-active","enter-class":"fade-in-start","enter-to-class":"fade-in-end","leave-active-class":"fade-out-active","leave-class":"fade-out-start","leave-to-class":"fade-out-end",onAfterEnter:a.onEntered,onAfterLeave:a.onLeft},{default:ne(()=>[Object(s["i"])("div",se,[Object(s["i"])("div",re,[Object(s["i"])(o,{"change-ms":n.config.timer.changeMs,duration:n.duration,"enter-ms":n.config.timer.enterMs,"interval-ms":n.config.timer.intervalMs,"leave-ms":n.config.timer.leaveMs,playing:i.playing,score:i.score,onTimerExpired:a.onTimerExpired},null,8,["change-ms","duration","enter-ms","interval-ms","leave-ms","playing","score","onTimerExpired"])]),Object(s["i"])(d,{id:"match-dnd-board",disabled:a.inTransition,playing:i.playing,"throttle-ms":n.config.dnd.throttleMs,onDrag:a.onDrag,onOver:a.onOver,onDrop:a.onDrop},{default:ne(()=>[Object(s["i"])(c,{componentName:"Draggable",id:"terms","tile-type":"term",disabled:a.inTransition,"enter-ms":n.config.tile.enterMs,"leave-ms":n.config.tile.leaveMs,playing:i.playing,tiles:i.terms,"tile-count":n.itemsPerBoard},null,8,["disabled","enter-ms","leave-ms","playing","tiles","tile-count"]),Object(s["i"])(c,{componentName:"Droppable",id:"definitions","tile-type":"definition",disabled:a.inTransition,"enter-ms":n.config.tile.enterMs,"leave-ms":n.config.tile.leaveMs,playing:i.playing,tiles:i.definitions,"tile-count":n.itemsPerBoard},null,8,["disabled","enter-ms","leave-ms","playing","tiles","tile-count"])]),_:1},8,["disabled","playing","throttle-ms","onDrag","onOver","onDrop"])])]),_:1},8,["duration","onAfterEnter","onAfterLeave"])}));function ae(e,t){let n=["red","orange","yellow","lime","green","cyan","blue","purple","magenta","navy","gray","teal"];switch(t.toLowerCase()){case"rainbow":return e.map(e=>{let t=Math.floor(Math.random()*n.length),s=n[t];return n.splice(t,1),{...e,color:s}});default:return e.map(e=>({...e,color:""}))}}function oe(e){for(let t=e.length-1;t>0;t--){const n=Math.floor(Math.random()*(t+1));[e[t],e[n]]=[e[n],e[t]]}return e}function ce(e,t,n="id"){return Object.prototype.hasOwnProperty.call(t,n)?e.map(e=>e[n]!==t[n]?e:{...e,...t}):e}function de(e,t,n="id",s){if(!Object.prototype.hasOwnProperty.call(t,n))return e;const r=e.find(e=>e[n]===t[n]),i=s?s(r):t;return r?e.map(e=>e[n]!==i[n]?e:{...e,...i}):e.concat(i)}const le=Object(s["K"])("data-v-22ef2717"),he=le((function(e,t,n,r,i,a){return Object(s["s"])(),Object(s["f"])("div",Object(s["n"])({id:n.id,class:[a.classes]},Object(s["E"])(a.listeners)),[Object(s["z"])(e.$slots,"default")],16,["id"])}));var me=n("2ef0"),ue=n.n(me),ge={name:"DnD",props:{disabled:{type:Boolean,required:!1,default:!1},id:{type:String,required:!1},playing:{type:Boolean,required:!0,default:!1},throttleMs:{type:Number,required:!0,default:33.333}},data(){return{dragged:{active:!1}}},computed:{canDrag(){return this.playing&&!this.disabled},classes(){return{board:!0}},dragging(){const{active:e=!1}=this.dragged;return e},listeners(){return this.playing?{mousedown:e=>this.dragStart(e),touchstart:e=>this.dragStart(e),mouseup:e=>this.dragEnd(e),touchend:e=>this.dragEnd(e),mousemove:e=>this.throttledDrag(e),touchmove:e=>this.throttledDrag(e)}:{}},throttledDrag(){return ue.a.throttle(this.drag,this.throttleMs,{trailing:!0})}},methods:{dragStart(e){if(e.preventDefault(),!this.canDrag)return;const t=e.target.classList.contains("draggable")?e.target:e.target.closest(".draggable");if(!t)return;const n="touchstart"===e.type?e.touches[0].clientX:e.clientX,s="touchstart"===e.type?e.touches[0].clientY:e.clientY,{top:r,left:i}=t.getBoundingClientRect();this.dragged={active:!0,dragId:t.id,offsetX:n-i,offsetY:s-r,initialX:n,initialY:s}},drag(e){if(e.preventDefault(),!this.canDrag||!this.dragging)return;const{dragId:t,initialX:n,initialY:s,overId:r}=this.dragged,i="touchmove"===e.type?e.touches[0].clientX-n:e.clientX-n,a="touchmove"===e.type?e.touches[0].clientY-s:e.clientY-s;this.$emit("drag",{dragId:t,dragX:i,dragY:a});const{id:o=""}=document.elementsFromPoint("touchmove"===e.type?e.touches[0].clientX:e.clientX,"touchmove"===e.type?e.touches[0].clientY:e.clientY).find(e=>e.classList.contains("droppable"))||{};r!==o&&(this.$emit("over",{dropId:o}),this.dragged={...this.dragged,overId:o})},dragEnd(e){if(e.preventDefault(),this.throttledDrag.cancel(),!this.canDrag||!this.dragging)return;const{dragId:t,initialX:n,initialY:s,offsetX:r,offsetY:i}=this.dragged,a="touchend"===e.type?e.changedTouches[0].clientX:e.clientX,o="touchend"===e.type?e.changedTouches[0].clientY:e.clientY,c=document.elementsFromPoint(a,o).find(e=>e.classList.contains("droppable")),{top:d,left:l}=c&&c.getBoundingClientRect()||{};this.$emit("drop",{dragId:t,dragX:c?a-n:a,dragY:c?o-s:o,dropId:c?c.id:null,dropX:c?Math.round(l-n+r):null,dropY:c?Math.round(d-s+i):null}),this.dragged={active:!1}}},mounted(){console.log(this.$options.name,"mounted...")}};n("5ccd");ge.render=he,ge.__scopeId="data-v-22ef2717";var fe=ge;const pe=Object(s["K"])("data-v-4ef3aa98"),ve=pe((function(e,t,n,r,i,a){return Object(s["s"])(),Object(s["f"])(s["c"],{appear:"",tag:"div",id:n.id,class:[a.classes],duration:{enter:""+n.enterMs,leave:""+n.leaveMs},css:!0,"enter-class":"fade-in-start","enter-active-class":"fade-in-active","enter-to-class":"fade-in-end","move-class":a.transitionGroup,onAfterEnter:a.onEntered,onLeave:a.onLeft},{default:pe(()=>[(Object(s["s"])(!0),Object(s["f"])(s["a"],null,Object(s["y"])(a.filteredTiles,e=>(Object(s["s"])(),Object(s["f"])(Object(s["B"])(n.componentName),{key:e.id,content:e.content,disabled:n.disabled,id:e.id,style:[e.style],class:[a.tileClasses,n.tileType,e.className]},null,8,["content","disabled","id","style","class"]))),128))]),_:1},8,["id","class","duration","move-class","onAfterEnter","onLeave"])})),be=Object(s["K"])("data-v-0e4639df"),Oe=be((function(e,t,n,r,i,a){return Object(s["s"])(),Object(s["f"])("div",{id:n.id,innerHTML:n.content},null,8,["id","innerHTML"])}));var ye={name:"Draggable",props:["content","id"]};n("f999");ye.render=Oe,ye.__scopeId="data-v-0e4639df";var je=ye;const Me=Object(s["K"])("data-v-14ad459b"),we=Me((function(e,t,n,r,i,a){return Object(s["s"])(),Object(s["f"])("div",{id:n.id,innerHTML:n.content},null,8,["id","innerHTML"])}));var Ie={name:"Droppable",props:["content","disabled","id"]};n("3886");Ie.render=we,Ie.__scopeId="data-v-14ad459b";var De=Ie,Te={name:"MatchTileBoard",components:{Draggable:je,Droppable:De},props:["componentName","disabled","duration","enterMs","id","leaveMs","playing","tiles","tileType","tileCount"],computed:{transitionGroup(){return this.disabled?"slide":"no-move-list"},classes(){return{"tile-board":!0,"tile-board--match":!0,"tile-board--disabled":!this.playing,["tiles-"+this.tileCount]:this.tileCount}},filteredTiles(){return this.tiles.filter(e=>e.show)},tileClasses(){return{tile:!0,draggable:"Draggable"===this.componentName,droppable:"Droppable"===this.componentName,disabled:this.disabled}}},methods:{onEntered(){console.log("entered!")},onLeft(e){console.log("left!"),e.style.display="none"}}};n("2089");Te.render=ve,Te.__scopeId="data-v-4ef3aa98";var _e=Te;const Se=Object(s["K"])("data-v-74f05a30");Object(s["v"])("data-v-74f05a30");const xe={class:"timer__wrapper"},Pe={class:"timer__svg",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg","xmlns:svg":"http://www.w3.org/2000/svg"},Be={class:"timer__circle"};Object(s["t"])();const Ce=Se((function(e,t,n,r,i,a){return Object(s["s"])(),Object(s["f"])(s["b"],{duration:{enter:""+n.enterMs,leave:""+n.leaveMs},"enter-active-class":"fade-in-active","enter-class":"fade-in-start","enter-to-class":"fade-in-end","leave-active-class":"fade-out-active","leave-class":"fade-out-start","leave-to-class":"fade-out-end",css:!0,onAfterEnter:a.onEntered,onAfterLeave:a.onLeft},{default:Se(()=>[Object(s["J"])(Object(s["i"])("div",{class:"timer",id:n.id},[Object(s["i"])(s["b"],{appear:"",css:!0,duration:{enter:""+n.changeMs,leave:""+n.changeMs},"leave-active-class":"score-out-active","leave-class":"score-out-start","leave-to-class":"score-out-end",onAfterLeave:a.endScoreChange},{default:Se(()=>[Object(s["J"])(Object(s["i"])("div",xe,[(Object(s["s"])(),Object(s["f"])("svg",Pe,[Object(s["i"])("g",Be,[Object(s["i"])("circle",{class:["timer__path-elapsed",i.hitMiss],cx:"50",cy:"50",r:"45"},null,2),Object(s["i"])("path",{"stroke-dasharray":a.circleDasharray,class:["timer__path-remaining",[a.severity,i.hitMiss]],d:"M 50, 50\n            m -45, 0\n            a 45,45 0 1,0 90,0\n            a 45,45 0 1,0 -90,0\n          "},null,10,["stroke-dasharray"])])])),Object(s["i"])("span",{class:["timer__label",i.hitMiss]},Object(s["D"])(n.score||a.formattedTimeLeft),3)],512),[[s["H"],!i.scoreChanging]])]),_:1},8,["duration","onAfterLeave"])],8,["id"]),[[s["H"],n.playing]])]),_:1},8,["duration","onAfterEnter","onAfterLeave"])})),Ee=283,Le=40,Ae=20;var Xe={name:"MatchTimer",props:["active","changeMs","duration","enterMs","id","intervalMs","leaveMs","playing","score"],data(){return{elapsed:0,hitMiss:null,intervalId:null,scoreChanging:!1}},computed:{circleDasharray(){const e=this.progressPct/100-1/this.duration*(1-this.progressPct/100);return(e*Ee).toFixed(0)+" 283"},expired(){return this.remaining<=0},formattedTimeLeft(){const e=Math.floor(this.remaining/6e4);let t=Math.floor(this.remaining%6e4/1e3);return t<10&&(t="0"+t),`${e}:${t}`},progressPct(){return Math.round(this.remaining/(1e3*this.duration)*1e4)/100},remaining(){return 1e3*this.duration-this.elapsed},severity(){return this.progressPct<=Le?this.progressPct<=Ae?"alert":"warn":"success"}},methods:{onEntered(e){console.log("timer entered..."),this.startTimer()},onLeft(e){console.log("timer left..."),this.elapsed=0},startTimer(){this.elapsed=0,this.intervalId=setInterval(()=>this.elapsed+=this.intervalMs,this.intervalMs)},endTimer(){this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null)},endScoreChange(e){console.log("score changed ending..."),this.scoreChanging=!1,this.hitMiss=null}},watch:{score(e,t){console.log("score changed!"),this.scoreChanging=!0,this.hitMiss=e>t?"hit":"miss"},expired(e,t){!t&&e&&(this.endTimer(),this.$emit("timer-expired"))}},mounted(){console.log(this.$options.name,"mounted...")},unmounted(){this.endTimer()}};n("a9ae");Xe.render=Ce,Xe.__scopeId="data-v-74f05a30";var Ye=Xe,$e={name:"MatchGame",components:{DnD:fe,MatchTileBoard:_e,MatchTimer:Ye},props:{colorScheme:{type:String,required:!1,default:"rainbow"},config:{type:Object,required:!0},duration:{type:Number,required:!0,default:60},itemsPerBoard:{type:Number,required:!0,default:9},matches:{type:Array,required:!0,default:()=>[]}},data(){return{correct:0,definitions:[],incorrect:0,playing:!1,score:0,stats:[],terms:[],transitioning:!1}},computed:{inTransition:{get(){return this.transitioning},set(e){this.transitioning=e}},progress(){return this.correct/this.itemsPerBoard}},methods:{deal(){console.log("dealing...");const e=oe(this.matches),t=e.slice(0,Math.min(this.itemsPerBoard,e.length));let n=t.map(e=>({...e,matched:!1,show:!0})),s=n.map(e=>{const{term:t,definition:n,...s}=e;return{...s,content:t,answer:n,id:w.a.generate()}});s=ae(s,this.colorScheme),this.terms=oe(s);let r=[...n];r=r.map(e=>{const{term:t,definition:n,...s}=e;return{...s,content:n,id:w.a.generate()}}),this.definitions=oe(r)},hitStyle(e,t,n,s,r,i,a){return{"--hit-start-tx":e+"px","--hit-start-ty":t+"px","--hit-start-tz":n+"px","--hit-end-tx":s+"px","--hit-end-ty":r+"px","--hit-end-tz":i+"px","--hit-duration":a+"ms"}},isMatch:function(e,t){const n=e=>t=>t.id===e,{answer:s}=this.terms.find(n(e))||{},{content:r}=this.definitions.find(n(t))||{};return!!s&&!!r&&s===r},missStyle(e,t,n){return{...this.translate(e,t,n)}},moveStyle(e,t,n){return{...this.translate(e,t,n)}},onDrag(e){const{dragId:t,dragX:n,dragY:s}=e||{};this.terms=ce(this.terms,{id:t,style:this.moveStyle(n,s,1),className:"drag"})},onDrop(e){const{dragId:t,dragX:n,dragY:s,dropId:r,dropX:i,dropY:a}=e||{},o=!!r&&this.isMatch(t,r);if(this.terms=ce(this.terms,{id:t,matched:o,className:o?"hit":"miss",style:o?this.hitStyle(n,s,1,i,a,1,this.config.tile.hitMs):this.missStyle(0,0,0)}),!r)return;this.definitions=ce(this.definitions,{id:r,className:o?"hit":"",...o&&{matched:!0}}),this.score=Math.max(o?this.score+1:this.score-1,0);const{content:c}=this.terms.find(e=>e.id===t)||{};this.stats=de(this.stats,{term:c},"term",e=>e?{term:c,hit:o?e.hit+1:e.hit,miss:o?e.miss:e.miss+1}:{term:c,hit:o?1:0,miss:o?0:1}),o?(this.inTransition=!0,setTimeout(()=>{this.terms=ce(this.terms,{id:t,show:!1}),this.definitions=ce(this.definitions,{id:r,show:!1}),this.correct++,this.inTransition=!1},this.config.tile.hitMs)):this.incorrect++},onEntered(){console.log("game entered..."),this.deal(),this.playing=!0},onLeft(){console.log("game left....")},onOver(e){const{dropId:t}=e||{};this.definitions=this.definitions.map(e=>({...e,className:e.id!==t||e.matched?"":"over"}))},onTimerExpired(){console.log("timer expired..."),this.playing=!1,setTimeout(()=>{this.$emit("game-over",{correct:this.correct,incorrect:this.incorrect,data:this.stats,score:this.score})},2e3)},translate(e,t,n){return{transform:"translate3d("+e+"px, "+t+"px, "+n+"px)"}}},watch:{progress(e,t){t&&Math.floor(e)!==Math.floor(t)?(console.log("new round...",t,"vs",e),this.deal(),this.playing=!0):(console.log("shuffling..."),this.inTransition=!0,this.terms=oe(this.terms),this.definitions=oe(this.definitions),setTimeout(()=>{this.inTransition=!1},this.config.tile.shuffleMs))}}};n("6411");$e.render=ie,$e.__scopeId="data-v-9f56f7fa";var Ne=$e;m.a.defaults.headers.get["Content-Type"]="application/json",m.a.defaults.headers.common["quizdini-timezone"]=Intl.DateTimeFormat().resolvedOptions().timeZone;const ke={dnd:{throttleMs:33.33},game:{enterMs:1e3,leaveMs:1e3},tile:{enterMs:800,hitMs:800,leaveMs:0,missMs:800},timer:{intervalMs:100,changeMs:250,enterMs:1e3,leaveMs:1e3}};var qe={name:"Match",components:{MatchGame:Ne},data(){return{colorScheme:"",correct:0,definitions:[],duration:60,gameId:null,itemsPerBoard:0,matches:[],showBoard:!1,showSplash:!0,title:""}},computed:{config(){return ke},game:{get(){return{colorScheme:this.colorScheme,duration:this.duration,gameId:this.gameId,itemsPerBoard:this.itemsPerBoard,matches:this.matches,title:this.title}},set(e){const{matchId:t,matches:n=[],options:{duration:s=60,colorScheme:r="",itemsPerBoard:i=9}={},title:a=""}=e;this.colorScheme=r,this.duration=s,this.gameId=t,this.itemsPerBoard=i,this.matches=n,this.title=a}},matchId(){return this.$route.params.id}},methods:{async fetchMatch(){try{const e=await m.a.get("/api/match/"+this.matchId,{timeout:1e4});return e.data}catch(e){console.log(e)}},async postPing(e){try{const t=await m.a.post("/api/ping",e,{timeout:1e4});return t.data}catch(t){console.log(t)}},async onGameOver(e){console.log("on game over..."),this.showBoard=!1;const t=await this.postPing({gameId:this.matchId,gameType:"M",results:e});console.log(JSON.stringify(t)),setTimeout(()=>{this.showBoard=!0},5e3)}},async created(){const e=await this.fetchMatch();this.game=e,this.showBoard=!0},mounted(){console.log(this.$options.name,"mounted...")}};n("5e4a");qe.render=te,qe.__scopeId="data-v-55a1f694";var ze=qe;const Ge=Object(s["K"])("data-v-b788fbbe");Object(s["v"])("data-v-b788fbbe");const Ke={class:"p-4"};Object(s["t"])();const Fe=Ge((function(e,t,n,r,i,a){const o=Object(s["A"])("router-link");return Object(s["s"])(),Object(s["f"])("div",Ke,[Object(s["i"])("ul",null,[(Object(s["s"])(!0),Object(s["f"])(s["a"],null,Object(s["y"])(i.games,e=>(Object(s["s"])(),Object(s["f"])("li",{key:e.id},[Object(s["i"])(o,{class:"game-link game-link--match",to:{name:"match",params:{id:e.id}}},{default:Ge(()=>[Object(s["h"])(Object(s["D"])(e.title),1)]),_:2},1032,["to"])]))),128))])])}));m.a.defaults.headers.get["Content-Type"]="application/json",m.a.defaults.headers.common["quizdini-timezone"]=Intl.DateTimeFormat().resolvedOptions().timeZone;var He={name:"Matches",data(){return{games:[]}},methods:{async fetchData(){try{const e=await m.a.get("/api/matches/",{timeout:3e4});return e.data}catch(e){console.log(e)}}},async created(){const e=await this.fetchData(),t=e.map(e=>({id:e.matchId,title:e.title}));this.games=t}};n("1c66");He.render=Fe,He.__scopeId="data-v-b788fbbe";var Je=He;const Re=[{path:"/",name:"matches",component:Je,props:!1},{path:"/match/:id",name:"match",component:ze,props:!1},{path:"/newmatch/:id",name:"newmatch",component:Q,props:!1}],Ue=Object(o["a"])({history:Object(o["b"])(),routes:Re});var Ze=Ue;Object(s["e"])(a).use(Ze).mount("#quizdini")},"58e1":function(e,t,n){},"5ccd":function(e,t,n){"use strict";n("bb1b")},"5e4a":function(e,t,n){"use strict";n("58e1")},6411:function(e,t,n){"use strict";n("015f")},"70f3":function(e,t,n){},"9cdc":function(e,t,n){"use strict";n("c701")},a273:function(e,t,n){},a2d5:function(e,t,n){"use strict";n("eb38")},a9ae:function(e,t,n){"use strict";n("e57b")},bb1b:function(e,t,n){},c701:function(e,t,n){},e57b:function(e,t,n){},eb38:function(e,t,n){},f999:function(e,t,n){"use strict";n("17c0")}});
//# sourceMappingURL=app.04607da5.js.map