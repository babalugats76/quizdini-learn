(function(t){function e(e){for(var i,r,o=e[0],c=e[1],d=e[2],h=0,m=[];h<o.length;h++)r=o[h],Object.prototype.hasOwnProperty.call(s,r)&&s[r]&&m.push(s[r][0]),s[r]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(t[i]=c[i]);l&&l(e);while(m.length)m.shift()();return a.push.apply(a,d||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],i=!0,o=1;o<n.length;o++){var c=n[o];0!==s[c]&&(i=!1)}i&&(a.splice(e--,1),t=r(r.s=n[0]))}return t}var i={},s={app:0},a=[];function r(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=t,r.c=i,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var d=0;d<o.length;d++)e(o[d]);var l=c;a.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"17c0":function(t,e,n){},"1c66":function(t,e,n){"use strict";n("3f69")},2089:function(t,e,n){"use strict";n("70f3")},"253b":function(t,e,n){},"34f1":function(t,e,n){"use strict";n("3948")},3886:function(t,e,n){"use strict";n("253b")},3948:function(t,e,n){},"3f69":function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("a79d");var i=n("7a23");function s(t,e,n,s,a,r){const o=Object(i["A"])("router-view");return Object(i["s"])(),Object(i["f"])(o)}var a={name:"App"};n("9cdc");a.render=s;var r=a,o=n("6c02");function c(t,e,n,s,a,r){return Object(i["s"])(),Object(i["f"])("pre",null,"     "+Object(i["D"])(JSON.stringify(a.globalState,null,4))+"\n   ",1)}var d=n("bc3a"),l=n.n(d);l.a.defaults.headers.common["quizdini-timezone"]=Intl.DateTimeFormat().resolvedOptions().timeZone;const h={timeout:3e4},m=async({url:t,config:e=h})=>{console.log("url",t),console.log("config",e);try{const n=await l.a.get(t,e);return{data:n.data}}catch(n){return{error:n.response.data}}},u="/api/match";var f={fetch:t=>m({url:`${u}/${t}`})},g=(n("ddb0"),n("8dee")),p=n.n(g),v={dnd:{throttleMs:33.33},game:{enterMs:1e3,leaveMs:1e3},tile:{enterMs:800,hitMs:800,leaveMs:0,missMs:800},timer:{intervalMs:100,changeMs:250,enterMs:1e3,leaveMs:1e3}};const b=Object(i["w"])({canDnD:!1,colorScheme:null,correct:0,definitions:[],duration:60,gameId:null,incorrect:0,itemsPerBoard:9,matches:[],score:0,stats:[],terms:[],title:null}),y=()=>b.canDnD,O=()=>b.colorScheme,M=()=>v,j=()=>b.correct,w=()=>b.definitions,D=()=>b.duration,I=()=>b.gameId,T=()=>b.incorrect,x=()=>b.itemsPerBoard,S=()=>b.matches,_=()=>b.score,P=()=>b.stats,B=()=>b.terms,L=()=>b.title,A=t=>b.canDnD=t,C=t=>b.colorScheme=t,E=t=>b.correct=t,N=t=>b.definitions=t,X=t=>b.duration=t,Y=t=>b.gameId=t,$=t=>b.incorrect=t,q=t=>b.itemsPerBoard=t,z=t=>b.matches=t,G=t=>b.score=t,J=t=>b.stats=t,k=t=>b.terms=t,F=t=>b.title=t,H={canDnD:y,colorScheme:O,config:M,correct:j,definitions:w,duration:D,gameId:I,incorrect:T,itemsPerBoard:x,matches:S,score:_,stats:P,terms:B,title:L},Z={setCanDnD:A,setColorScheme:C,setCorrect:E,setDefinitions:N,setDuration:X,setGameId:Y,setIncorrect:$,setItemsPerBoard:q,setMatches:z,setScore:G,setStats:J,setTerms:k,setTitle:F},R=t=>{for(let e=t.length-1;e>0;e--){const n=Math.floor(Math.random()*(e+1));[t[e],t[n]]=[t[n],t[e]]}return t},K=(t,e,n,i,s,a,r)=>({"--hit-start-tx":t+"px","--hit-start-ty":e+"px","--hit-start-tz":n+"px","--hit-end-tx":i+"px","--hit-end-ty":s+"px","--hit-end-tz":a+"px","--hit-duration":r+"ms"}),Q=(t,e,n)=>({...(void 0).translate(t,e,n)}),U=t=>{console.log("loading data...");const{matchId:e,matches:n=[],options:{duration:i=60,colorScheme:s="",itemsPerBoard:a=9}={},title:r=""}=t;b.colorScheme=s,b.duration=i,b.gameId=e,b.itemsPerBoard=a,b.matches=n,b.title=r},V=()=>{console.log("dealing...");const t=R(b.matches),e=t.slice(0,Math.min(b.itemsPerBoard,t.length));let n=e.map(t=>({...t,matched:!1,show:!0})),i=R(n.map(t=>{const{term:e,definition:n,...i}=t;return{...i,content:e,answer:n,id:p.a.generate()}})),s=[...n];s=s.map(t=>{const{term:e,definition:n,...i}=t;return{...i,content:n,id:p.a.generate()}}),b.terms=i,b.definitions=s},W=()=>{console.log("shuffling..."),b.terms=R(b.terms),b.definitions=R(b.definitions)},tt=(t,e)=>{const{answer:n}=b.terms.find(e=>e.id===t)||{},{content:i}=b.definitions.find(t=>t.id===e)||{};return!!n&&!!i&&n===i},et=t=>{const e={id:null,x:null,y:null},{id:n,x:i,y:s}=t.drag||e,{id:a,x:r,y:o}=t.drop||e,c=!!a&&tt(n,a);if(b.terms=b.terms.map(t=>(t.id===n&&(t.matched=c,t.className=c?"hit":"miss",t.style=c?K(i,s,1,r,o,1,M.tile.hitMs):Q(0,0,0)),t)),!a)return;b.definitions=b.definitions.map(t=>(t.id===a&&(t.matched=c,t.className=c?"hit":""),t));const{content:d}=b.terms.find(t=>t.id===n)||{};b.score=Math.max(c?b.score+1:b.score-1,0);const l=b.stats.filter(t=>t.term===d).length;b.stats=l?b.stats.map(t=>t.term===d?{term:d,hit:c?t.hit+1:t.hit,miss:c?t.miss:t.miss+1}:t):b.stats.concat({term:d,hit:c?1:0,miss:c?0:1})},nt={load:U,deal:V,shuffle:W,drop:et,isMatch:tt};var it={name:"Match",data(){return{globalState:b}},computed:{...H,matchId(){return this.$route.params.id}},methods:{...Z,...nt},async created(){console.log(this.matchId);const t=await f.fetch(this.matchId);this.load(t.data),this.deal(),setTimeout(()=>{this.shuffle(),this.setCanDnD(!0)},1e3)}};it.render=c;var st=it;const at=Object(i["J"])("data-v-55a1f694");Object(i["v"])("data-v-55a1f694");const rt={class:"full-page full-page--match"};Object(i["t"])();const ot=at((function(t,e,n,s,a,r){const o=Object(i["A"])("MatchGame");return Object(i["s"])(),Object(i["f"])("div",rt,[a.showBoard?(Object(i["s"])(),Object(i["f"])(o,{key:0,"color-scheme":a.colorScheme,duration:a.duration,"items-per-board":a.itemsPerBoard,matches:a.matches,config:r.config,onGameOver:r.onGameOver},null,8,["color-scheme","duration","items-per-board","matches","config","onGameOver"])):Object(i["g"])("",!0)])})),ct=Object(i["J"])("data-v-3f7deb86");Object(i["v"])("data-v-3f7deb86");const dt={id:"match-game"},lt={id:"match-timer"};Object(i["t"])();const ht=ct((function(t,e,n,s,a,r){const o=Object(i["A"])("MatchTimer"),c=Object(i["A"])("MatchTileBoard"),d=Object(i["A"])("DnD");return Object(i["s"])(),Object(i["f"])(i["b"],{appear:"",css:!0,duration:{enter:""+n.config.game.enterMs,leave:""+n.config.game.leaveMs},"enter-active-class":"fade-in-active","enter-class":"fade-in-start","enter-to-class":"fade-in-end","leave-active-class":"fade-out-active","leave-class":"fade-out-start","leave-to-class":"fade-out-end",onAfterEnter:r.onEntered,onAfterLeave:r.onLeft},{default:ct(()=>[Object(i["i"])("div",dt,[Object(i["i"])("div",lt,[Object(i["i"])(o,{"change-ms":n.config.timer.changeMs,duration:n.duration,"enter-ms":n.config.timer.enterMs,"interval-ms":n.config.timer.intervalMs,"leave-ms":n.config.timer.leaveMs,playing:a.playing,score:a.score,onTimerExpired:r.onTimerExpired},null,8,["change-ms","duration","enter-ms","interval-ms","leave-ms","playing","score","onTimerExpired"])]),Object(i["i"])(d,{id:"match-dnd-board",disabled:r.inTransition,playing:a.playing,"throttle-ms":n.config.dnd.throttleMs,onDrag:r.onDrag,onOver:r.onOver,onDrop:r.onDrop},{default:ct(()=>[Object(i["i"])(c,{componentName:"Draggable",id:"terms","tile-type":"term",disabled:r.inTransition,"enter-ms":n.config.tile.enterMs,"leave-ms":n.config.tile.leaveMs,playing:a.playing,tiles:a.terms,"tile-count":n.itemsPerBoard},null,8,["disabled","enter-ms","leave-ms","playing","tiles","tile-count"]),Object(i["i"])(c,{componentName:"Droppable",id:"definitions","tile-type":"definition",disabled:r.inTransition,"enter-ms":n.config.tile.enterMs,"leave-ms":n.config.tile.leaveMs,playing:a.playing,tiles:a.definitions,"tile-count":n.itemsPerBoard},null,8,["disabled","enter-ms","leave-ms","playing","tiles","tile-count"])]),_:1},8,["disabled","playing","throttle-ms","onDrag","onOver","onDrop"])])]),_:1},8,["duration","onAfterEnter","onAfterLeave"])}));function mt(t,e){let n=["red","orange","yellow","lime","green","cyan","blue","purple","magenta","navy","gray","teal"];switch(e.toLowerCase()){case"rainbow":return t.map(t=>{let e=Math.floor(Math.random()*n.length),i=n[e];return n.splice(e,1),{...t,color:i}});default:return t.map(t=>({...t,color:""}))}}function ut(t){for(let e=t.length-1;e>0;e--){const n=Math.floor(Math.random()*(e+1));[t[e],t[n]]=[t[n],t[e]]}return t}function ft(t,e,n="id"){return t.map(t=>t[n]!==e[n]?t:{...t,...e})}function gt(t,e,n="id",i){if(!Object.prototype.hasOwnProperty.call(e,n))return t;const s=t.find(t=>t[n]===e[n]),a=i?i(s):e;return s?ft(t,a,n):t.concat(a)}const pt=Object(i["J"])("data-v-ea25e368"),vt=pt((function(t,e,n,s,a,r){return Object(i["s"])(),Object(i["f"])("div",Object(i["n"])({id:n.id,class:[r.classes]},Object(i["E"])(r.listeners)),[Object(i["z"])(t.$slots,"default")],16,["id"])}));var bt=n("2ef0"),yt=n.n(bt),Ot={name:"DnD",props:{disabled:{type:Boolean,required:!1,default:!1},id:{type:String,required:!1},playing:{type:Boolean,required:!0,default:!1},throttleMs:{type:Number,required:!0,default:33.333}},data(){return{dragged:{active:!1}}},computed:{canDrag(){return this.playing&&!this.disabled},classes(){return{board:!0}},dragging(){const{active:t=!1}=this.dragged;return t},listeners(){return this.playing?{mousedown:t=>this.dragStart(t),touchstart:t=>this.dragStart(t),mouseup:t=>this.dragEnd(t),touchend:t=>this.dragEnd(t),mousemove:t=>this.throttledDrag(t),touchmove:t=>this.throttledDrag(t)}:{}},throttledDrag(){return yt.a.throttle(this.drag,this.throttleMs,{trailing:!0})}},methods:{dragStart(t){if(t.preventDefault(),!this.canDrag)return;const e=t.target.classList.contains("draggable")?t.target:t.target.closest(".draggable");if(!e)return;const n="touchstart"===t.type?t.touches[0].clientX:t.clientX,i="touchstart"===t.type?t.touches[0].clientY:t.clientY,{top:s,left:a}=e.getBoundingClientRect();this.dragged={active:!0,dragId:e.id,offsetX:n-a,offsetY:i-s,initialX:n,initialY:i}},drag(t){if(t.preventDefault(),!this.canDrag||!this.dragging)return;const{dragId:e,initialX:n,initialY:i,overId:s}=this.dragged,a="touchmove"===t.type?t.touches[0].clientX-n:t.clientX-n,r="touchmove"===t.type?t.touches[0].clientY-i:t.clientY-i;this.$emit("drag",{dragId:e,dragX:a,dragY:r});const{id:o=""}=document.elementsFromPoint("touchmove"===t.type?t.touches[0].clientX:t.clientX,"touchmove"===t.type?t.touches[0].clientY:t.clientY).find(t=>t.classList.contains("droppable"))||{};s!==o&&(this.$emit("over",{dropId:o}),this.dragged={...this.dragged,overId:o})},dragEnd(t){if(t.preventDefault(),this.throttledDrag.cancel(),!this.canDrag||!this.dragging)return;const{dragId:e,initialX:n,initialY:i,offsetX:s,offsetY:a}=this.dragged,r="touchend"===t.type?t.changedTouches[0].clientX:t.clientX,o="touchend"===t.type?t.changedTouches[0].clientY:t.clientY,c=document.elementsFromPoint(r,o).find(t=>t.classList.contains("droppable")),{id:d}=c||{},{top:l,left:h}=c&&c.getBoundingClientRect()||{};this.$emit("drop",{drag:{id:e,x:c?r-n:r,y:c?o-i:o},drop:c?{id:d,x:Math.round(h-n+s),y:Math.round(l-i+a)}:null}),this.dragged={active:!1}}},mounted(){console.log(this.$options.name,"mounted...")}};n("34f1");Ot.render=vt,Ot.__scopeId="data-v-ea25e368";var Mt=Ot;const jt=Object(i["J"])("data-v-4ef3aa98"),wt=jt((function(t,e,n,s,a,r){return Object(i["s"])(),Object(i["f"])(i["c"],{appear:"",tag:"div",id:n.id,class:[r.classes],duration:{enter:""+n.enterMs,leave:""+n.leaveMs},css:!0,"enter-class":"fade-in-start","enter-active-class":"fade-in-active","enter-to-class":"fade-in-end","move-class":r.transitionGroup,onAfterEnter:r.onEntered,onLeave:r.onLeft},{default:jt(()=>[(Object(i["s"])(!0),Object(i["f"])(i["a"],null,Object(i["y"])(r.filteredTiles,t=>(Object(i["s"])(),Object(i["f"])(Object(i["B"])(n.componentName),{key:t.id,content:t.content,disabled:n.disabled,id:t.id,style:[t.style],class:[r.tileClasses,n.tileType,t.className]},null,8,["content","disabled","id","style","class"]))),128))]),_:1},8,["id","class","duration","move-class","onAfterEnter","onLeave"])})),Dt=Object(i["J"])("data-v-0e4639df"),It=Dt((function(t,e,n,s,a,r){return Object(i["s"])(),Object(i["f"])("div",{id:n.id,innerHTML:n.content},null,8,["id","innerHTML"])}));var Tt={name:"Draggable",props:["content","id"]};n("f999");Tt.render=It,Tt.__scopeId="data-v-0e4639df";var xt=Tt;const St=Object(i["J"])("data-v-14ad459b"),_t=St((function(t,e,n,s,a,r){return Object(i["s"])(),Object(i["f"])("div",{id:n.id,innerHTML:n.content},null,8,["id","innerHTML"])}));var Pt={name:"Droppable",props:["content","disabled","id"]};n("3886");Pt.render=_t,Pt.__scopeId="data-v-14ad459b";var Bt=Pt,Lt={name:"MatchTileBoard",components:{Draggable:xt,Droppable:Bt},props:["componentName","disabled","duration","enterMs","id","leaveMs","playing","tiles","tileType","tileCount"],computed:{transitionGroup(){return this.disabled?"slide":"no-move-list"},classes(){return{"tile-board":!0,"tile-board--match":!0,"tile-board--disabled":!this.playing,["tiles-"+this.tileCount]:this.tileCount}},filteredTiles(){return this.tiles.filter(t=>t.show)},tileClasses(){return{tile:!0,draggable:"Draggable"===this.componentName,droppable:"Droppable"===this.componentName,disabled:this.disabled}}},methods:{onEntered(){console.log("entered!")},onLeft(t){console.log("left!"),t.style.display="none"}}};n("2089");Lt.render=wt,Lt.__scopeId="data-v-4ef3aa98";var At=Lt;const Ct=Object(i["J"])("data-v-74f05a30");Object(i["v"])("data-v-74f05a30");const Et={class:"timer__wrapper"},Nt={class:"timer__svg",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg","xmlns:svg":"http://www.w3.org/2000/svg"},Xt={class:"timer__circle"};Object(i["t"])();const Yt=Ct((function(t,e,n,s,a,r){return Object(i["s"])(),Object(i["f"])(i["b"],{duration:{enter:""+n.enterMs,leave:""+n.leaveMs},"enter-active-class":"fade-in-active","enter-class":"fade-in-start","enter-to-class":"fade-in-end","leave-active-class":"fade-out-active","leave-class":"fade-out-start","leave-to-class":"fade-out-end",css:!0,onAfterEnter:r.onEntered,onAfterLeave:r.onLeft},{default:Ct(()=>[Object(i["I"])(Object(i["i"])("div",{class:"timer",id:n.id},[Object(i["i"])(i["b"],{appear:"",css:!0,duration:{enter:""+n.changeMs,leave:""+n.changeMs},"leave-active-class":"score-out-active","leave-class":"score-out-start","leave-to-class":"score-out-end",onAfterLeave:r.endScoreChange},{default:Ct(()=>[Object(i["I"])(Object(i["i"])("div",Et,[(Object(i["s"])(),Object(i["f"])("svg",Nt,[Object(i["i"])("g",Xt,[Object(i["i"])("circle",{class:["timer__path-elapsed",a.hitMiss],cx:"50",cy:"50",r:"45"},null,2),Object(i["i"])("path",{"stroke-dasharray":r.circleDasharray,class:["timer__path-remaining",[r.severity,a.hitMiss]],d:"M 50, 50\n            m -45, 0\n            a 45,45 0 1,0 90,0\n            a 45,45 0 1,0 -90,0\n          "},null,10,["stroke-dasharray"])])])),Object(i["i"])("span",{class:["timer__label",a.hitMiss]},Object(i["D"])(n.score||r.formattedTimeLeft),3)],512),[[i["G"],!a.scoreChanging]])]),_:1},8,["duration","onAfterLeave"])],8,["id"]),[[i["G"],n.playing]])]),_:1},8,["duration","onAfterEnter","onAfterLeave"])})),$t=283,qt=40,zt=20;var Gt={name:"MatchTimer",props:["active","changeMs","duration","enterMs","id","intervalMs","leaveMs","playing","score"],data(){return{elapsed:0,hitMiss:null,intervalId:null,scoreChanging:!1}},computed:{circleDasharray(){const t=this.progressPct/100-1/this.duration*(1-this.progressPct/100);return(t*$t).toFixed(0)+" 283"},expired(){return this.remaining<=0},formattedTimeLeft(){const t=Math.floor(this.remaining/6e4);let e=Math.floor(this.remaining%6e4/1e3);return e<10&&(e="0"+e),`${t}:${e}`},progressPct(){return Math.round(this.remaining/(1e3*this.duration)*1e4)/100},remaining(){return 1e3*this.duration-this.elapsed},severity(){return this.progressPct<=qt?this.progressPct<=zt?"alert":"warn":"success"}},methods:{onEntered(t){console.log("timer entered..."),this.startTimer()},onLeft(t){console.log("timer left..."),this.elapsed=0},startTimer(){this.elapsed=0,this.intervalId=setInterval(()=>this.elapsed+=this.intervalMs,this.intervalMs)},endTimer(){this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null)},endScoreChange(t){console.log("score changed ending..."),this.scoreChanging=!1,this.hitMiss=null}},watch:{score(t,e){console.log("score changed!"),this.scoreChanging=!0,this.hitMiss=t>e?"hit":"miss"},expired(t,e){!e&&t&&(this.endTimer(),this.$emit("timer-expired"))}},mounted(){console.log(this.$options.name,"mounted...")},unmounted(){this.endTimer()}};n("a9ae");Gt.render=Yt,Gt.__scopeId="data-v-74f05a30";var Jt=Gt,kt={name:"MatchGame",components:{DnD:Mt,MatchTileBoard:At,MatchTimer:Jt},props:{colorScheme:{type:String,required:!1,default:"rainbow"},config:{type:Object,required:!0},duration:{type:Number,required:!0,default:60},itemsPerBoard:{type:Number,required:!0,default:9},matches:{type:Array,required:!0,default:()=>[]}},data(){return{correct:0,definitions:[],incorrect:0,playing:!1,score:0,stats:[],terms:[],transitioning:!1}},computed:{inTransition:{get(){return this.transitioning},set(t){this.transitioning=t}},progress(){return this.correct/this.itemsPerBoard}},methods:{deal(){console.log("dealing...");const t=ut(this.matches),e=t.slice(0,Math.min(this.itemsPerBoard,t.length));let n=e.map(t=>({...t,matched:!1,show:!0})),i=n.map(t=>{const{term:e,definition:n,...i}=t;return{...i,content:e,answer:n,id:p.a.generate()}});i=mt(i,this.colorScheme),this.terms=ut(i);let s=[...n];s=s.map(t=>{const{term:e,definition:n,...i}=t;return{...i,content:n,id:p.a.generate()}}),this.definitions=ut(s)},hitStyle(t,e,n,i,s,a,r){return{"--hit-start-tx":t+"px","--hit-start-ty":e+"px","--hit-start-tz":n+"px","--hit-end-tx":i+"px","--hit-end-ty":s+"px","--hit-end-tz":a+"px","--hit-duration":r+"ms"}},isMatch:function(t,e){const n=t=>e=>e.id===t,{answer:i}=this.terms.find(n(t))||{},{content:s}=this.definitions.find(n(e))||{};return!!i&&!!s&&i===s},missStyle(t,e,n){return{...this.translate(t,e,n)}},moveStyle(t,e,n){return{...this.translate(t,e,n)}},onDrag(t){const{dragId:e,dragX:n,dragY:i}=t;this.terms=this.terms.map(t=>(t.style=t.id===e?this.moveStyle(n,i,1):t.style,t.className=t.id===e?"drag":t.className,t))},onDrop(t){const e={id:null,x:null,y:null},{id:n,x:i,y:s}=t.drag||e,{id:a,x:r,y:o}=t.drop||e,c=(t,e)=>n=>(n.show=n.id===t?e:n.show,n),d=!!a&&this.isMatch(n,a);if(this.terms=ft(this.terms,{id:n,matched:d,className:d?"hit":"miss",style:d?this.hitStyle(i,s,1,r,o,1,this.config.tile.hitMs):this.missStyle(0,0,0)}),!a)return;this.definitions=ft(this.definitions,{id:a,className:d?"hit":"",...d&&{matched:!0}}),this.score=Math.max(d?this.score+1:this.score-1,0);const{content:l}=this.terms.find(t=>t.id===n)||{};this.stats=gt(this.stats,{term:l},"term",t=>t?{term:l,hit:d?t.hit+1:t.hit,miss:d?t.miss:t.miss+1}:{term:l,hit:d?1:0,miss:d?0:1}),d?(this.inTransition=!0,setTimeout(()=>{this.terms=this.terms.map(c(n,!1)),this.definitions=this.definitions.map(c(a,!1)),this.correct++,this.inTransition=!1},this.config.tile.hitMs)):this.incorrect++},onEntered(){console.log("game entered..."),this.deal(),this.playing=!0},onLeft(){console.log("game left....")},onOver(t){const{dropId:e}=t;this.definitions=this.definitions.map(t=>(t.className=t.id!==e||t.matched?"":"over",t))},onTimerExpired(){console.log("timer expired..."),this.playing=!1,setTimeout(()=>{this.$emit("game-over",{correct:this.correct,incorrect:this.incorrect,data:this.stats,score:this.score})},2e3)},translate(t,e,n){return{transform:"translate3d("+t+"px, "+e+"px, "+n+"px)"}}},watch:{progress(t,e){e&&Math.floor(t)!==Math.floor(e)?(console.log("new round...",e,"vs",t),this.deal(),this.playing=!0):(console.log("shuffling..."),this.inTransition=!0,this.terms=ut(this.terms),this.definitions=ut(this.definitions),setTimeout(()=>{this.inTransition=!1},this.config.tile.shuffleMs))}}};n("aef4");kt.render=ht,kt.__scopeId="data-v-3f7deb86";var Ft=kt;l.a.defaults.headers.get["Content-Type"]="application/json",l.a.defaults.headers.common["quizdini-timezone"]=Intl.DateTimeFormat().resolvedOptions().timeZone;const Ht={dnd:{throttleMs:33.33},game:{enterMs:1e3,leaveMs:1e3},tile:{enterMs:800,hitMs:800,leaveMs:0,missMs:800},timer:{intervalMs:100,changeMs:250,enterMs:1e3,leaveMs:1e3}};var Zt={name:"Match",components:{MatchGame:Ft},data(){return{colorScheme:"",correct:0,definitions:[],duration:60,gameId:null,itemsPerBoard:0,matches:[],showBoard:!1,showSplash:!0,title:""}},computed:{config(){return Ht},game:{get(){return{colorScheme:this.colorScheme,duration:this.duration,gameId:this.gameId,itemsPerBoard:this.itemsPerBoard,matches:this.matches,title:this.title}},set(t){const{matchId:e,matches:n=[],options:{duration:i=60,colorScheme:s="",itemsPerBoard:a=9}={},title:r=""}=t;this.colorScheme=s,this.duration=i,this.gameId=e,this.itemsPerBoard=a,this.matches=n,this.title=r}},matchId(){return this.$route.params.id}},methods:{async fetchMatch(){try{const t=await l.a.get("/api/match/"+this.matchId,{timeout:1e4});return t.data}catch(t){console.log(t)}},async postPing(t){try{const e=await l.a.post("/api/ping",t,{timeout:1e4});return e.data}catch(e){console.log(e)}},async onGameOver(t){console.log("on game over..."),this.showBoard=!1;const e=await this.postPing({gameId:this.matchId,gameType:"M",results:t});console.log(JSON.stringify(e)),setTimeout(()=>{this.showBoard=!0},5e3)}},async created(){const t=await this.fetchMatch();this.game=t,this.showBoard=!0},mounted(){console.log(this.$options.name,"mounted...")}};n("5e4a");Zt.render=ot,Zt.__scopeId="data-v-55a1f694";var Rt=Zt;const Kt=Object(i["J"])("data-v-b788fbbe");Object(i["v"])("data-v-b788fbbe");const Qt={class:"p-4"};Object(i["t"])();const Ut=Kt((function(t,e,n,s,a,r){const o=Object(i["A"])("router-link");return Object(i["s"])(),Object(i["f"])("div",Qt,[Object(i["i"])("ul",null,[(Object(i["s"])(!0),Object(i["f"])(i["a"],null,Object(i["y"])(a.games,t=>(Object(i["s"])(),Object(i["f"])("li",{key:t.id},[Object(i["i"])(o,{class:"game-link game-link--match",to:{name:"match",params:{id:t.id}}},{default:Kt(()=>[Object(i["h"])(Object(i["D"])(t.title),1)]),_:2},1032,["to"])]))),128))])])}));l.a.defaults.headers.get["Content-Type"]="application/json",l.a.defaults.headers.common["quizdini-timezone"]=Intl.DateTimeFormat().resolvedOptions().timeZone;var Vt={name:"Matches",data(){return{games:[]}},methods:{async fetchData(){try{const t=await l.a.get("/api/matches/",{timeout:3e4});return t.data}catch(t){console.log(t)}}},async created(){const t=await this.fetchData(),e=t.map(t=>({id:t.matchId,title:t.title}));this.games=e}};n("1c66");Vt.render=Ut,Vt.__scopeId="data-v-b788fbbe";var Wt=Vt;const te=[{path:"/",name:"matches",component:Wt,props:!1},{path:"/match/:id",name:"match",component:Rt,props:!1},{path:"/newmatch/:id",name:"newmatch",component:st,props:!1}],ee=Object(o["a"])({history:Object(o["b"])(),routes:te});var ne=ee;Object(i["e"])(r).use(ne).mount("#quizdini")},"58e1":function(t,e,n){},"5e4a":function(t,e,n){"use strict";n("58e1")},"70f3":function(t,e,n){},"9cdc":function(t,e,n){"use strict";n("c701")},a9ae:function(t,e,n){"use strict";n("e57b")},aef4:function(t,e,n){"use strict";n("b884")},b884:function(t,e,n){},c701:function(t,e,n){},e57b:function(t,e,n){},f999:function(t,e,n){"use strict";n("17c0")}});
//# sourceMappingURL=app.ee1472fd.js.map